<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VNJX ShopBuilder 1.2</title> 
    <!-- Add the Bootstrap CSS link -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Include the Select2 CSS from CDN -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet">

    <!-- Add the Bootstrap JavaScript and Popper.js (if needed) -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"></script>
     

    <!-- Zip loader-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.6.0/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip-utils/0.1.0/jszip-utils.min.js"></script>



    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <!--- Jquery UI-->
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <!-- JQuery CSV we may need in the future -->
    <script src="assets/jquery.csv.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/he@1.2.0/he.js"></script>

    <!-- Include the Select2 JavaScript from CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>

</head>
<body>

    <div class="pageMain">
        <h3>VNJX ShopBuilder 1.2</h3>
        <div id="page1">
            <div class="alert alert-info" role="alert">
                <b>Hướng dẫn:</b>
                <p>Đây là công cụ chỉnh sửa và tạo shop bán trên server JX1 Linux 8.0 (đã test) & 6.0 (chưa test)</p>
                <ul>
                    <li>Tạo 1 thư mục bất kỳ trên máy (tạm gọi là A) có chứa <b>buysell.txt goods.txt</b> và thư mục <b>item</b> (cả 3 đều tìm được trong server1/settings)</li>
                    <li>Zip thư mục A này lại và bỏ file zip vào tool này và "Bắt đầu"</li>
                </ul>
            </div>

            <div class="controllerContainer"> 
            
                <p>
                    <label for="zip004Input" class="form-label">Chọn file zip</label>
                    <input class="form-control" type="file" id="zip004Input" accept=".zip" required>
                </p>
                <button type="button" class="btn btn-primary" id="uploadButton">Bắt Đầu</button>


                <div id="readProgressBar" class="progress" role="progressbar" aria-label="Example with label" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                    <div class="progress-bar progress-bar-striped progress-bar-animated"></div>
                </div> 
            </div>
        </div>
        <div id="page2">
            <ul class="nav nav-tabs nav-fill" id="myTab" role="tablist">
                

                <li class="nav-item" role="presentation">
                    <button class="nav-link " id="goods-txt-tab" data-bs-toggle="tab" data-bs-target="#goods-txt-tab-pane" type="button" role="tab" aria-controls="goods-txt-tab-pane" aria-selected="false">Vật phẩm bán (goods.txt)</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="buysell-txt-tab" data-bs-toggle="tab" data-bs-target="#buysell-txt-tab-pane" type="button" role="tab" aria-controls="buysell-txt-tab-pane" aria-selected="false">Cửa hàng (buysell.txt)</button>
                </li> 
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="item-viewers-tab" data-bs-toggle="tab" data-bs-target="#item-viewers-tab-pane" type="button" role="tab" aria-controls="item-viewers-tab-pane" aria-selected="true">Tất cả vật phẩm</button>
                </li>

                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="huongdan-tab" data-bs-toggle="tab" data-bs-target="#huongdan-tab-pane" type="button" role="tab" aria-controls="huongdan-tab-pane" aria-selected="true">Hướng dẫn sử dụng</button>
                </li>


                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="magicscript-tab" data-bs-toggle="tab" data-bs-target="#magicscript-tab-pane" type="button" role="tab" aria-controls="magicscript-tab-pane" aria-selected="true">Vật phẩm khác (magicscript.txt)</button>
                </li>
                
            </ul>
            <div class="tab-content" id="myTabContent">
                

                <div class="tab-pane fade" id="buysell-txt-tab-pane" role="tabpanel" aria-labelledby="buysell-txt-tab" tabindex="0"> 

                    <div class="dataContainer">


                        <div class="input-group mb-3 alert alert-primary">
                            <span class="input-group-text" id="basic-addon7">Chọn cửa hàng:</span>

                            <select class="form-select typeFilter" aria-label="Chọn shop" id="shopSelect"  class="form-control" placeholder="Shop"  aria-describedby="basic-addon3"></select>
                            <button class="btn btn-outline-danger" type="button" id="deleteShop">Xóa</button>
                        </div>
                        
                        <div class="dataContainer buysellEditorContainer"> 
                            

                            
                            <div id="buysellEditor"></div>



                            <div id="buysell-addGoods" class="input-group mb-3">
                                <span class="input-group-text" id="basic-addon7">Thêm vật phẩm bán (từ goods.txt)</span>
                                <span class="form-control" placeholder="tên" aria-label="Tên" aria-describedby="basic-addon7">
                                    <select id="addNewGoodToShopInp"><option></option></select>
                                </span>
                            </div>
                        </div>
                        
                        
                        <div class="input-group mb-3 addMoreShop">
                            <span class="input-group-text" id="basic-addon6">Thêm cửa hàng mới</span>
                            <input type="text" id="createNewShopInp" class="form-control" placeholder="tên" aria-label="Tên" aria-describedby="basic-addon6">
                            <button class="btn btn-outline-primary" type="button" id="createNewShop">+</button>
                        </div>

                        <div class="alert alert-warning" role="alert">
                            Chú ý: Xóa cửa hàng sẽ thay đổi thứ tự các cửa hàng sau đó. Toàn bộ các game script dùng  ID sẽ hoạt động sai.
                        </div>

                    </div>
                </div>


                <div class="tab-pane fade  " id="goods-txt-tab-pane" role="tabpanel" aria-labelledby="goods-txt-tab" tabindex="0">

            

                    <div class="dataContainer">



                        <div class="input-group mb-3 alert alert-primary">
                            <span class="input-group-text" id="basic-addon8">Thêm vật phẩm</span>
                            <span class="form-control" placeholder="tên" aria-label="Tên" aria-describedby="basic-addon8">
                                <select id="addNewItemToGoodInp"><option></option></select>
                            </span>
                        </div>
                        <div class="input-group mb-3">
                            <span class="input-group-text" id="basic-addon5">Lọc&nbsp;</span>
                            <input type="text" id="filterGoodByName" class="form-control" placeholder="Gõ vào tên" aria-label="Tên" aria-describedby="basic-addon5">
                        </div>
                        
						
                        <div class="input-group mb-13">
                            <span class="input-group-text" id="basic-addon13">Chọn cửa hàng thêm vật phẩm:</span>

                            <select class="form-select buysellSelection" aria-label="Chọn shop" id="buysellSelection"  class="form-control" placeholder="Shop"  aria-describedby="basic-addon13"></select>
                        </div>
						

                        <div id="goodsEditor"></div>

                        <nav id="goodsEditorPagination" class="nav-pagination" aria-label="Page navigation example"></nav>

                        <div class="alert alert-warning" role="alert">
                            Chú ý: Xóa vật phẩm sẽ thay đổi thứ tự các vật phẩm sau đó. Các Cửa Hàng liên quan sẽ tự động cập nhật để giữ đúng vật phẩm.
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="item-viewers-tab-pane" role="tabpanel" aria-labelledby="item-viewers-tab" tabindex="0">

                    <div class="dataContainer itemViewerContainer">
                        <div class="input-group mb-3">
                            <span class="input-group-text" id="basic-addon2">Loại</span> 
                            <select class="form-select typeFilter" aria-label="Chọn loại" id="itemFilterSelect"  class="form-control" placeholder="Loại vật phẩm"  aria-describedby="basic-addon2"></select>
            
            
                        </div>
            
                        <div class="input-group mb-3">
                            <span class="input-group-text" id="basic-addon1">Lọc&nbsp;</span>
                            <input type="text" id="filterByName" class="form-control" placeholder="Gõ vào tên" aria-label="Tên" aria-describedby="basic-addon1">
                        </div>
            
                        <div id="itemViewer">
            
                        </div>
            
                        <nav id="itemViewerPagination" class="nav-pagination" aria-label="Page navigation example"></nav>
                    </div>


                </div>

                <div class="tab-pane fade" id="magicscript-tab-pane" role="tabpanel" aria-labelledby="magicscript-tab" tabindex="0">

                    <div class="dataContainer magicscriptContainer"> 

                       
                        <div class="downloadMagicScriptContainer">
                            <button type="button" id="downloadMagicScript" class="btn btn-dark btn-lg">DOWNLOAD MAGICSCRIPT.txt</button>
                        </div>
                        <div class="input-group mb-3">
                            <span class="input-group-text" id="basic-addon1">Lọc&nbsp;</span>
                            <input type="text" id="filterMagicscriptByName" class="form-control" placeholder="Gõ vào tên" aria-label="Tên" aria-describedby="basic-addon1">
                        </div>
            
                        <button type="button" id="addNewMSItem" class="btn btn-primary btn-sm">+ Thêm item mới</button>

                        <div id="magicscriptEditor">
            
                        </div>
            
                        <nav id="magicscriptEditorPagination" class="nav-pagination" aria-label="Page navigation example"></nav>

                    </div>


                </div>



                <div class="tab-pane fade" id="huongdan-tab-pane" role="tabpanel" aria-labelledby="huongdan-tab" tabindex="0">

                    <div class="dataContainer"> 
                        
                        <p><b>Bước 1</b> thêm vật phẩm bán (và chỉnh giá) trong <a href="#" dTarget="#goods-txt-tab" >Vật phẩm bán (goods.txt)</a></p>
                        <p><b>Bước 2</b> thêm hoặc tạo cửa hàng mới với vật phẩm cần bán, trong <a href="#" dTarget="#buysell-txt-tab" >Cửa hàng (buysell.txt)</a>, </p>
                        <p><b>Bước 3</b> download về file goods.txt và buysell.txt mới (nhớ chọn đúng version server của bạn là 6 hoặc 8) và chép đè vào 3 chổ:</p>
                        <ul>
                            <li>Trên server: <b>server1/settings</b> và <b>gateway/s3relay/relaysetting/syncfiles/settings</b></li>
                            <li> Trên game: thư mục <b>settings</b></li>
                        </ul>
                        <p><b>Bước 4</b> Khởi động lại game và server. Dùng lệnh <i>Sale(ID, kiểu)</i> để  mở shop với:</p>
                        <ul>
                            <li>ID : id của cửa hàng</li>
                            <li>Kiểu (v6): 0:Tiền vạn, 1: phúc duyên, 2:danh vọng, 3: tích lũy TK, 4:vinh dự. Mặc định là tiền vạn.</li>
                            <li>Kiểu (v8): 0:Tiền vạn, 1: ... (chưa rõ)</li>
                        </ul> 
                    </div>


                    <div class="alert alert-warning" role="alert">

                        Mọi ý kiến đóng góp sửa lỗi vui lòng pm qua FB. Những thắc mắc sử dụng khác vui lòng hỏi vào post của mình trên hội quán.<br/>
                        
                        Nên sao lưu bản gốc <b>goods.txt</b> và <b>buysell.txt</b> đề phòng trường hợp file mới bị lỗi
                    </div>

                </div>

            </div>

            <div class="exportSection" role="alert"">
                <button type="button" id="downloadAllv6" class="btn btn-success btn-lg">v6 DOWNLOAD</button>

                <button type="button" id="downloadAllv8" class="btn btn-success btn-lg">v8 DOWNLOAD</button>

                <button type="button" id="backHome" class="btn btn-secondary btn-lg">Thoát</button>

            </div>
        </div>

        <footer>
            Author: <a href="https://www.facebook.com/nghiemtucdeptrai" target=_blank>vinh-ttn</a><br/>
            
        </footer>
    </div>
 
</body>
</html>