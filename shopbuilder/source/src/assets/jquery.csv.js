RegExp.escape=function(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")},function(){"use strict";let e;e="undefined"!=typeof jQuery&&jQuery?jQuery:{},e.csv={defaults:{separator:",",delimiter:'"',headers:!0},hooks:{castToScalar:function(e,r){if(isNaN(e))return e;if(/\./.test(e))return parseFloat(e);{const r=parseInt(e);return isNaN(r)?null:r}}},parsers:{parse:function(e,r){const t=r.separator,a=r.delimiter;r.state.rowNum||(r.state.rowNum=1),r.state.colNum||(r.state.colNum=1);const o=[];let s=[],n=0,i="",l=!1;function c(){if(n=0,i="",r.start&&r.state.rowNum<r.start)return s=[],r.state.rowNum++,void(r.state.colNum=1);if(void 0===r.onParseEntry)o.push(s);else{const e=r.onParseEntry(s,r.state);!1!==e&&o.push(e)}s=[],r.end&&r.state.rowNum>=r.end&&(l=!0),r.state.rowNum++,r.state.colNum=1}function u(){if(void 0===r.onParseValue)s.push(i);else if(r.headers&&1===r.state.rowNum)s.push(i);else{const e=r.onParseValue(i,r.state);!1!==e&&s.push(e)}i="",n=0,r.state.colNum++}const f=RegExp.escape(t),d=RegExp.escape(a);let m=/(D|S|\r\n|\n|\r|[^DS\r\n]+)/,p=m.source;return p=p.replace(/S/g,f),p=p.replace(/D/g,d),m=new RegExp(p,"gm"),e.replace(m,(function(e){if(!l)switch(n){case 0:if(e===t){i+="",u();break}if(e===a){n=1;break}if(/^(\r\n|\n|\r)$/.test(e)){u(),c();break}i+=e,n=3;break;case 1:if(e===a){n=2;break}i+=e,n=1;break;case 2:if(e===a){i+=e,n=1;break}if(e===t){u();break}if(/^(\r\n|\n|\r)$/.test(e)){u(),c();break}throw Error("CSVDataError: Illegal State [Row:"+r.state.rowNum+"][Col:"+r.state.colNum+"]");case 3:if(e===t){u();break}if(/^(\r\n|\n|\r)$/.test(e)){u(),c();break}if(e===a)throw Error("CSVDataError: Illegal Quote [Row:"+r.state.rowNum+"][Col:"+r.state.colNum+"]");throw Error("CSVDataError: Illegal Data [Row:"+r.state.rowNum+"][Col:"+r.state.colNum+"]");default:throw Error("CSVDataError: Unknown State [Row:"+r.state.rowNum+"][Col:"+r.state.colNum+"]")}})),0!==s.length&&(u(),c()),o},splitLines:function(r,t){if(!r)return;const a=(t=t||{}).separator||e.csv.defaults.separator,o=t.delimiter||e.csv.defaults.delimiter;t.state=t.state||{},t.state.rowNum||(t.state.rowNum=1);const s=[];let n=0,i="",l=!1;function c(){if(n=0,t.start&&t.state.rowNum<t.start)return i="",void t.state.rowNum++;if(void 0===t.onParseEntry)s.push(i);else{const e=t.onParseEntry(i,t.state);!1!==e&&s.push(e)}i="",t.end&&t.state.rowNum>=t.end&&(l=!0),t.state.rowNum++}const u=RegExp.escape(a),f=RegExp.escape(o);let d=/(D|S|\n|\r|[^DS\r\n]+)/,m=d.source;return m=m.replace(/S/g,u),m=m.replace(/D/g,f),d=new RegExp(m,"gm"),r.replace(d,(function(e){if(!l)switch(n){case 0:if(e===a){i+=e,n=0;break}if(e===o){i+=e,n=1;break}if("\n"===e){c();break}if(/^\r$/.test(e))break;i+=e,n=3;break;case 1:if(e===o){i+=e,n=2;break}i+=e,n=1;break;case 2:{const r=i.substr(i.length-1);if(e===o&&r===o){i+=e,n=1;break}if(e===a){i+=e,n=0;break}if("\n"===e){c();break}if("\r"===e)break;throw Error("CSVDataError: Illegal state [Row:"+t.state.rowNum+"]")}case 3:if(e===a){i+=e,n=0;break}if("\n"===e){c();break}if("\r"===e)break;if(e===o)throw Error("CSVDataError: Illegal quote [Row:"+t.state.rowNum+"]");throw Error("CSVDataError: Illegal state [Row:"+t.state.rowNum+"]");default:throw Error("CSVDataError: Unknown state [Row:"+t.state.rowNum+"]")}})),""!==i&&c(),s},parseEntry:function(e,r){const t=r.separator,a=r.delimiter;r.state.rowNum||(r.state.rowNum=1),r.state.colNum||(r.state.colNum=1);const o=[];let s=0,n="";function i(){if(void 0===r.onParseValue)o.push(n);else{const e=r.onParseValue(n,r.state);!1!==e&&o.push(e)}n="",s=0,r.state.colNum++}if(!r.match){const e=RegExp.escape(t),o=RegExp.escape(a);let s=/(D|S|\n|\r|[^DS\r\n]+)/.source;s=s.replace(/S/g,e),s=s.replace(/D/g,o),r.match=new RegExp(s,"gm")}return e.replace(r.match,(function(e){switch(s){case 0:if(e===t){n+="",i();break}if(e===a){s=1;break}if("\n"===e||"\r"===e)break;n+=e,s=3;break;case 1:if(e===a){s=2;break}n+=e,s=1;break;case 2:if(e===a){n+=e,s=1;break}if(e===t){i();break}if("\n"===e||"\r"===e)break;n+=e,s=1;break;case 3:if(e===t){i();break}if("\n"===e||"\r"===e)break;if(e===a){n+=e,s=1;break}throw Error("CSVDataError: Illegal Data [Row:"+r.state.rowNum+"][Col:"+r.state.colNum+"]");default:throw Error("CSVDataError: Unknown State [Row:"+r.state.rowNum+"][Col:"+r.state.colNum+"]")}})),i(),o}},helpers:{collectPropertyNames:function(e){let r=[],t=[];const a=[];for(r in e)for(t in e[r])e[r].hasOwnProperty(t)&&a.indexOf(t)<0&&"function"!=typeof e[r][t]&&a.push(t);return a}},toArray:function(r,t,a){if(void 0!==t&&"function"==typeof t){if(void 0!==a)return console.error("You cannot 3 arguments with the 2nd argument being a function");a=t,t={}}t=void 0!==t?t:{};const o={};o.callback=void 0!==a&&"function"==typeof a&&a,o.separator="separator"in t?t.separator:e.csv.defaults.separator,o.delimiter="delimiter"in t?t.delimiter:e.csv.defaults.delimiter;const s=void 0!==t.state?t.state:{};t={delimiter:o.delimiter,separator:o.separator,onParseEntry:t.onParseEntry,onParseValue:t.onParseValue,state:s};const n=e.csv.parsers.parseEntry(r,t);if(!o.callback)return n;o.callback("",n)},toArrays:function(r,t,a){if(void 0!==t&&"function"==typeof t){if(void 0!==a)return console.error("You cannot 3 arguments with the 2nd argument being a function");a=t,t={}}t=void 0!==t?t:{};const o={};o.callback=void 0!==a&&"function"==typeof a&&a,o.separator="separator"in t?t.separator:e.csv.defaults.separator,o.delimiter="delimiter"in t?t.delimiter:e.csv.defaults.delimiter;let s=[];if(void 0!==(t={delimiter:o.delimiter,separator:o.separator,onPreParse:t.onPreParse,onParseEntry:t.onParseEntry,onParseValue:t.onParseValue,onPostParse:t.onPostParse,start:t.start,end:t.end,state:{rowNum:1,colNum:1}}).onPreParse&&(r=t.onPreParse(r,t.state)),s=e.csv.parsers.parse(r,t),void 0!==t.onPostParse&&(s=t.onPostParse(s,t.state)),!o.callback)return s;o.callback("",s)},toObjects:function(r,t,a){if(void 0!==t&&"function"==typeof t){if(void 0!==a)return console.error("You cannot 3 arguments with the 2nd argument being a function");a=t,t={}}t=void 0!==t?t:{};const o={};o.callback=void 0!==a&&"function"==typeof a&&a,o.separator="separator"in t?t.separator:e.csv.defaults.separator,o.delimiter="delimiter"in t?t.delimiter:e.csv.defaults.delimiter,o.headers="headers"in t?t.headers:e.csv.defaults.headers,t.start="start"in t?t.start:1,o.headers&&t.start++,t.end&&o.headers&&t.end++;let s=[],n=[];t={delimiter:o.delimiter,separator:o.separator,onPreParse:t.onPreParse,onParseEntry:t.onParseEntry,onParseValue:t.onParseValue,onPostParse:t.onPostParse,start:t.start,end:t.end,state:{rowNum:1,colNum:1},match:!1,transform:t.transform};const i={delimiter:o.delimiter,separator:o.separator,start:1,end:1,state:{rowNum:1,colNum:1},headers:!0};void 0!==t.onPreParse&&(r=t.onPreParse(r,t.state));const l=e.csv.parsers.splitLines(r,i),c=e.csv.toArray(l[0],i);s=e.csv.parsers.splitLines(r,t),t.state.colNum=1,t.state.rowNum=c?2:1;for(let r=0,a=s.length;r<a;r++){const a=e.csv.toArray(s[r],t),o={};for(let e=0;e<c.length;e++)o[c[e]]=a[e];void 0!==t.transform?n.push(t.transform.call(void 0,o)):n.push(o),t.state.rowNum++}if(void 0!==t.onPostParse&&(n=t.onPostParse(n,t.state)),!o.callback)return n;o.callback("",n)},fromArrays:function(r,t,a){if(void 0!==t&&"function"==typeof t){if(void 0!==a)return console.error("You cannot 3 arguments with the 2nd argument being a function");a=t,t={}}t=void 0!==t?t:{};const o={};o.callback=void 0!==a&&"function"==typeof a&&a,o.separator="separator"in t?t.separator:e.csv.defaults.separator,o.delimiter="delimiter"in t?t.delimiter:e.csv.defaults.delimiter;let s="";for(let e=0;e<r.length;e++){const t=r[e],a=[];for(let e=0;e<t.length;e++){let r=void 0===t[e]||null===t[e]?"":t[e].toString();r.indexOf(o.delimiter)>-1&&(r=r.replace(new RegExp(o.delimiter,"g"),o.delimiter+o.delimiter));let s="\n|\r|S|D";s=s.replace("S",o.separator),s=s.replace("D",o.delimiter),r.search(s)>-1&&(r=o.delimiter+r+o.delimiter),a.push(r)}s+=a.join(o.separator)+"\n"}if(!o.callback)return s;o.callback("",s)},fromObjects:function(r,t,a){if(void 0!==t&&"function"==typeof t){if(void 0!==a)return console.error("You cannot 3 arguments with the 2nd argument being a function");a=t,t={}}t=void 0!==t?t:{};const o={};if(o.callback=void 0!==a&&"function"==typeof a&&a,o.separator="separator"in t?t.separator:e.csv.defaults.separator,o.delimiter="delimiter"in t?t.delimiter:e.csv.defaults.delimiter,o.headers="headers"in t?t.headers:e.csv.defaults.headers,o.sortOrder="sortOrder"in t?t.sortOrder:"declare",o.manualOrder="manualOrder"in t?t.manualOrder:[],o.transform=t.transform,"string"==typeof o.manualOrder&&(o.manualOrder=e.csv.toArray(o.manualOrder,o)),void 0!==o.transform){const e=r;r=[];for(let t=0;t<e.length;t++)r.push(o.transform.call(void 0,e[t]))}let s,n=e.csv.helpers.collectPropertyNames(r);if("alpha"===o.sortOrder&&n.sort(),o.manualOrder.length>0){const e=[].concat(o.manualOrder);for(let r=0;r<n.length;r++)e.indexOf(n[r])<0&&e.push(n[r]);n=e}const i=[];let l;o.headers&&i.push(n);for(let e=0;e<r.length;e++){s=[];for(let t=0;t<n.length;t++)l=n[t],l in r[e]&&"function"!=typeof r[e][l]?s.push(r[e][l]):s.push("");i.push(s)}return e.csv.fromArrays(i,t,o.callback)}},e.csvEntry2Array=e.csv.toArray,e.csv2Array=e.csv.toArrays,e.csv2Dictionary=e.csv.toObjects,"undefined"!=typeof module&&module.exports&&(module.exports=e.csv)}.call(this);